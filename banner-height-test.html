<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banneré«˜åº¦é…ç½®æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding-bottom: 100px;
        }
        
        .control-panel {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .button-group {
            margin: 10px 0;
        }
        
        button {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #007bff;
            color: white;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        button.danger {
            background: #dc3545;
        }
        
        button.danger:hover {
            background: #c82333;
        }
        
        .status {
            background: #e7f1ff;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ Banneré«˜åº¦é…ç½®æµ‹è¯•</h1>
    
    <div class="control-panel">
        <h3>Banneré«˜åº¦æ§åˆ¶</h3>
        
        <div class="button-group">
            <button onclick="setHeight(1)">è®¾ç½®é«˜åº¦1px</button>
            <button onclick="setHeight(3)">è®¾ç½®é«˜åº¦3px</button>
            <button onclick="setHeight(5)">è®¾ç½®é«˜åº¦5px (å½“å‰é»˜è®¤)</button>
            <button onclick="setHeight(10)">è®¾ç½®é«˜åº¦10px</button>
            <button onclick="setHeight(20)">è®¾ç½®é«˜åº¦20px</button>
        </div>
        
        <div class="button-group">
            <button onclick="setHeight(25)">è®¾ç½®é«˜åº¦25px</button>
            <button onclick="setHeight(50)">è®¾ç½®é«˜åº¦50px</button>
            <button onclick="setHeight(100)">è®¾ç½®é«˜åº¦100px</button>
        </div>
        
        <div class="button-group">
            <button onclick="refreshBanner()">ğŸ”„ æ‰‹åŠ¨åˆ·æ–°Banner</button>
            <button onclick="enableBanner()">âœ… å¯ç”¨Banner</button>
            <button onclick="disableBanner()" class="danger">âŒ ç¦ç”¨Banner</button>
        </div>
        
        <div class="button-group">
            <button onclick="showCurrentConfig()">ğŸ“‹ æ˜¾ç¤ºå½“å‰é…ç½®</button>
            <button onclick="clearLog()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
        </div>
    </div>
    
    <div class="status" id="status">
        ç­‰å¾…æ“ä½œ...
    </div>
    
    <div class="log" id="log">
        === Banneré«˜åº¦é…ç½®æµ‹è¯•æ—¥å¿— ===<br>
    </div>

    <!-- åŠ è½½PokiSDK -->
    <script src="scripts/v2/poki-sdk.js"></script>
    
    <script>
        // æ•è·æ§åˆ¶å°æ—¥å¿—
        var originalLog = console.log;
        var originalWarn = console.warn;
        var originalError = console.error;
        
        function logToPage(type, message) {
            var logDiv = document.getElementById('log');
            var timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${type}: ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            if (args[0] && typeof args[0] === 'string' && args[0].includes('PokiSDK')) {
                logToPage('LOG', args.join(' '));
            }
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            if (args[0] && typeof args[0] === 'string' && args[0].includes('PokiSDK')) {
                logToPage('WARN', args.join(' '));
            }
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            if (args[0] && typeof args[0] === 'string' && args[0].includes('PokiSDK')) {
                logToPage('ERROR', args.join(' '));
            }
        };
        
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
            logToPage('STATUS', message);
        }
        
        function setHeight(height) {
            updateStatus(`è®¾ç½®Banneré«˜åº¦ä¸º ${height}px`);
            
            PokiSDK.setAutoBannerConfig({
                height: height
            });
            
            setTimeout(function() {
                var config = PokiSDK.getAutoBannerConfig();
                updateStatus(`Banneré«˜åº¦å·²è®¾ç½®ä¸º ${config.height}px`);
            }, 200);
        }
        
        function refreshBanner() {
            updateStatus('æ‰‹åŠ¨åˆ·æ–°Banner...');
            PokiSDK.refreshBanner();
            
            setTimeout(function() {
                updateStatus('Banneråˆ·æ–°å®Œæˆ');
            }, 500);
        }
        
        function enableBanner() {
            updateStatus('å¯ç”¨Bannerå¹¿å‘Š...');
            PokiSDK.enableAutoBanner(true);
            
            setTimeout(function() {
                updateStatus('Bannerå¹¿å‘Šå·²å¯ç”¨');
            }, 200);
        }
        
        function disableBanner() {
            updateStatus('ç¦ç”¨Bannerå¹¿å‘Š...');
            PokiSDK.enableAutoBanner(false);
            
            // ç§»é™¤ç°æœ‰çš„Banner
            var existingBanner = document.getElementById('poki-auto-banner-ad');
            if (existingBanner) {
                existingBanner.remove();
                updateStatus('Bannerå¹¿å‘Šå·²ç¦ç”¨å¹¶ç§»é™¤');
            } else {
                updateStatus('Bannerå¹¿å‘Šå·²ç¦ç”¨');
            }
        }
        
        function showCurrentConfig() {
            var config = PokiSDK.getAutoBannerConfig();
            var configText = `å½“å‰é…ç½®:\n` +
                `- å¯ç”¨çŠ¶æ€: ${config.enabled}\n` +
                `- å®½åº¦: ${config.width}px\n` +
                `- é«˜åº¦: ${config.height}px\n` +
                `- å»¶è¿Ÿ: ${config.delay}ms`;
            
            updateStatus(configText);
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '=== Banneré«˜åº¦é…ç½®æµ‹è¯•æ—¥å¿— ===<br>';
            updateStatus('æ—¥å¿—å·²æ¸…ç©º');
        }
        
        // æ£€æŸ¥BannerçŠ¶æ€
        function checkBannerStatus() {
            var banner = document.getElementById('poki-auto-banner-ad');
            if (banner) {
                var rect = banner.getBoundingClientRect();
                logToPage('CHECK', `BannerçŠ¶æ€: å­˜åœ¨, é«˜åº¦=${rect.height}px, å¯è§=${rect.height > 0}`);
            } else {
                logToPage('CHECK', 'BannerçŠ¶æ€: ä¸å­˜åœ¨');
            }
        }
        
        // å®šæœŸæ£€æŸ¥BannerçŠ¶æ€
        setInterval(checkBannerStatus, 3000);
        
        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºåˆå§‹çŠ¶æ€
        window.addEventListener('load', function() {
            setTimeout(function() {
                updateStatus('é¡µé¢åŠ è½½å®Œæˆï¼Œæ£€æŸ¥åˆå§‹é…ç½®...');
                showCurrentConfig();
            }, 1000);
        });
        
        // ç›‘å¬Bannerå¹¿å‘Šäº‹ä»¶
        window.addEventListener('bannerAdLoaded', function(event) {
            logToPage('EVENT', `Bannerå¹¿å‘ŠåŠ è½½æˆåŠŸ: ${JSON.stringify(event.detail)}`);
        });
        
        window.addEventListener('bannerAdError', function(event) {
            logToPage('EVENT', `Bannerå¹¿å‘ŠåŠ è½½å¤±è´¥: ${JSON.stringify(event.detail)}`);
        });
    </script>
</body>
</html> 