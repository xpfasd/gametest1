<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bannerå¹¿å‘Šæµ‹è¯•é¡µé¢</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            background-color: #f0f0f0;
        }
        
        .game-content {
            text-align: center;
            padding: 50px 20px;
            background-color: white;
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        /* 320x50å¹¿å‘Šçš„çˆ¶çº§å®¹å™¨ - å¿…é¡»å®½åº¦100%ï¼Œé«˜åº¦50pxï¼Œå±…äºåº•éƒ¨ */
        .banner-ad-parent {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* 320x50å¹¿å‘Šå®¹å™¨ */
        .banner-ad-container {
            width: 320px;
            height: 50px;
            background-color: #e9ecef;
            border: 1px dashed #6c757d;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #6c757d;
            font-size: 12px;
        }
        
        /* å…¶ä»–å°ºå¯¸å¹¿å‘Šå®¹å™¨ */
        .ad-container-300x250 {
            width: 300px;
            height: 250px;
            margin: 20px auto;
            background-color: #e9ecef;
            border: 1px dashed #6c757d;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #6c757d;
        }
        
        .ad-container-728x90 {
            width: 728px;
            height: 90px;
            margin: 20px auto;
            background-color: #e9ecef;
            border: 1px dashed #6c757d;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #6c757d;
        }
        
        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            max-width: 300px;
        }
        
        button {
            padding: 8px 16px;
            margin: 5px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        button:hover {
            background-color: #0056b3;
        }
        
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .log-output {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            white-space: pre-wrap;
        }
        
        .status {
            margin: 10px 0;
            padding: 5px;
            border-radius: 3px;
            font-size: 12px;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="game-content">
        <h1>ğŸ® Bannerå¹¿å‘Šæµ‹è¯•é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•PokiSDKçš„çœŸå®Google AdSense bannerå¹¿å‘ŠåŠŸèƒ½</p>
        
        <!-- 300x250å¹¿å‘Šä½ -->
        <div class="ad-container-300x250" id="ad-300x250">
            ç­‰å¾…300x250å¹¿å‘Š...
        </div>
        
        <!-- 728x90å¹¿å‘Šä½ -->
        <div class="ad-container-728x90" id="ad-728x90">
            ç­‰å¾…728x90å¹¿å‘Š...
        </div>
        
        <p>åº•éƒ¨æœ‰ä¸€ä¸ª320x50çš„æ¨ªå¹…å¹¿å‘Šï¼ŒæŒ‰ç…§è¦æ±‚ï¼š</p>
        <ul style="text-align: left; display: inline-block;">
            <li>âœ… å¿…é¡»æœ‰insæ ‡ç­¾</li>
            <li>âœ… insæ ‡ç­¾æœ‰çˆ¶çº§å®¹å™¨</li>
            <li>âœ… çˆ¶çº§å®¹å™¨å®½åº¦100%ï¼ˆå±å¹•å®½åº¦ï¼‰</li>
            <li>âœ… çˆ¶çº§å®¹å™¨é«˜åº¦50px</li>
            <li>âœ… å±…äºå±å¹•åº•éƒ¨</li>
        </ul>
    </div>
    
    <!-- 320x50å¹¿å‘Šçš„çˆ¶çº§å®¹å™¨ - ä¸¥æ ¼æŒ‰ç…§è¦æ±‚è®¾ç½® -->
    <div class="banner-ad-parent">
        <div class="banner-ad-container" id="banner-ad-320x50">
            ç­‰å¾…320x50æ¨ªå¹…å¹¿å‘Š...
        </div>
    </div>
    
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <h3>ğŸ›ï¸ æ§åˆ¶é¢æ¿</h3>
        
        <div>
            <button onclick="testBannerAd('320x50')">æµ‹è¯•320x50å¹¿å‘Š</button>
            <button onclick="testBannerAd('300x250')">æµ‹è¯•300x250å¹¿å‘Š</button>
            <button onclick="testBannerAd('728x90')">æµ‹è¯•728x90å¹¿å‘Š</button>
        </div>
        
        <div>
            <button onclick="destroyAllAds()">é”€æ¯æ‰€æœ‰å¹¿å‘Š</button>
            <button onclick="checkAdBlocker()">æ£€æµ‹å¹¿å‘Šæ‹¦æˆª</button>
            <button onclick="clearLogs()">æ¸…ç©ºæ—¥å¿—</button>
        </div>
        
        <div id="status" class="status info">
            çŠ¶æ€ï¼šç­‰å¾…SDKåˆå§‹åŒ–...
        </div>
        
        <div class="log-output" id="log-output">
            ç­‰å¾…æ—¥å¿—è¾“å‡º...
        </div>
    </div>

    <!-- å¼•å…¥PokiSDK -->
    <script src="scripts/v2/poki-sdk.js"></script>
    
    <script>
        // æ—¥å¿—è¾“å‡ºåŠŸèƒ½
        function addLog(message, type = 'info') {
            const logOutput = document.getElementById('log-output');
            const timestamp = new Date().toLocaleTimeString();
            
            // å¦‚æœmessageæ˜¯å¯¹è±¡ï¼Œæ ¼å¼åŒ–æ˜¾ç¤º
            let displayMessage = message;
            if (typeof message === 'object' && message !== null) {
                try {
                    displayMessage = JSON.stringify(message, null, 2);
                } catch (e) {
                    displayMessage = '[Object: ' + e.message + ']';
                }
            }
            
            const logEntry = `[${timestamp}] ${displayMessage}\n`;
            
            if (logOutput.textContent === 'ç­‰å¾…æ—¥å¿—è¾“å‡º...') {
                logOutput.textContent = '';
            }
            
            logOutput.textContent += logEntry;
            logOutput.scrollTop = logOutput.scrollHeight;
            
            // åŒæ ·è®°å½•åˆ°åŸå§‹æ§åˆ¶å°
            if (type === 'error') {
                originalConsoleError(message);
            } else if (type === 'warning') {
                originalConsoleWarn(message);
            } else {
                originalConsoleLog(message);
            }
        }
        
        // æ›´æ–°çŠ¶æ€
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.textContent = 'çŠ¶æ€ï¼š' + message;
            status.className = 'status ' + type;
            addLog(message, type);
        }
        
        // é‡å†™console.logæ¥æ•è·æ‰€æœ‰æ—¥å¿—
        const originalConsoleLog = console.log;
        const originalConsoleWarn = console.warn;
        const originalConsoleError = console.error;
        
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            addLog(args.join(' '), 'info');
        };
        
        console.warn = function(...args) {
            originalConsoleWarn.apply(console, args);
            addLog('âš ï¸ ' + args.join(' '), 'warning');
        };
        
        console.error = function(...args) {
            originalConsoleError.apply(console, args);
            addLog('âŒ ' + args.join(' '), 'error');
        };
        
        // æµ‹è¯•bannerå¹¿å‘Š
        function testBannerAd(size) {
            let containerId;
            switch(size) {
                case '320x50':
                    containerId = 'banner-ad-320x50';
                    break;
                case '300x250':
                    containerId = 'ad-300x250';
                    break;
                case '728x90':
                    containerId = 'ad-728x90';
                    break;
                default:
                    addLog('âŒ ä¸æ”¯æŒçš„å¹¿å‘Šå°ºå¯¸: ' + size, 'error');
                    return;
            }
            
            const container = document.getElementById(containerId);
            if (!container) {
                addLog('âŒ æ‰¾ä¸åˆ°å®¹å™¨: ' + containerId, 'error');
                return;
            }
            
            addLog('ğŸš€ å¼€å§‹æµ‹è¯• ' + size + ' å¹¿å‘Š...', 'info');
            updateStatus('æ­£åœ¨åŠ è½½ ' + size + ' å¹¿å‘Š...', 'info');
            
            PokiSDK.displayAd(
                container,
                size,
                function() {
                    addLog('âœ… ' + size + ' å¹¿å‘ŠåŠ è½½æˆåŠŸï¼', 'success');
                    updateStatus(size + ' å¹¿å‘ŠåŠ è½½æˆåŠŸ', 'success');
                },
                function(error) {
                    addLog('âŒ ' + size + ' å¹¿å‘ŠåŠ è½½å¤±è´¥: ' + error, 'error');
                    updateStatus(size + ' å¹¿å‘ŠåŠ è½½å¤±è´¥: ' + error, 'error');
                }
            );
        }
        
        // é”€æ¯æ‰€æœ‰å¹¿å‘Š
        function destroyAllAds() {
            addLog('ğŸ—‘ï¸ é”€æ¯æ‰€æœ‰å¹¿å‘Š...', 'info');
            PokiSDK.destroyAd();
            
            // é‡ç½®å®¹å™¨å†…å®¹
            document.getElementById('banner-ad-320x50').innerHTML = 'ç­‰å¾…320x50æ¨ªå¹…å¹¿å‘Š...';
            document.getElementById('ad-300x250').innerHTML = 'ç­‰å¾…300x250å¹¿å‘Š...';
            document.getElementById('ad-728x90').innerHTML = 'ç­‰å¾…728x90å¹¿å‘Š...';
            
            updateStatus('æ‰€æœ‰å¹¿å‘Šå·²é”€æ¯', 'info');
        }
        
        // æ£€æµ‹å¹¿å‘Šæ‹¦æˆªå™¨
        function checkAdBlocker() {
            addLog('ğŸ” æ£€æµ‹å¹¿å‘Šæ‹¦æˆªå™¨...', 'info');
            
            if (PokiSDK.isAdBlocked()) {
                addLog('ğŸš« æ£€æµ‹åˆ°å¹¿å‘Šæ‹¦æˆªå™¨', 'error');
                updateStatus('æ£€æµ‹åˆ°å¹¿å‘Šæ‹¦æˆªå™¨', 'error');
            } else {
                addLog('âœ… æ²¡æœ‰æ£€æµ‹åˆ°å¹¿å‘Šæ‹¦æˆªå™¨', 'success');
                updateStatus('æ²¡æœ‰æ£€æµ‹åˆ°å¹¿å‘Šæ‹¦æˆªå™¨', 'success');
            }
        }
        
        // æ¸…ç©ºæ—¥å¿—
        function clearLogs() {
            document.getElementById('log-output').textContent = '';
            addLog('ğŸ“‹ æ—¥å¿—å·²æ¸…ç©º', 'info');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            addLog('ğŸ“„ é¡µé¢åŠ è½½å®Œæˆ', 'info');
            
            // æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
            addLog('ğŸŒ ç¯å¢ƒä¿¡æ¯:', 'info');
            addLog({
                'URL': window.location.href,
                'Protocol': window.location.protocol,
                'Hostname': window.location.hostname,
                'User Agent': navigator.userAgent.substring(0, 100) + '...',
                'Language': navigator.language,
                'Cookie Enabled': navigator.cookieEnabled,
                'Online': navigator.onLine,
                'Do Not Track': navigator.doNotTrack,
                'Screen': window.screen.width + 'x' + window.screen.height,
                'Viewport': window.innerWidth + 'x' + window.innerHeight,
                'AdSense Script Exists': !!document.querySelector('script[src*="googlesyndication"]'),
                'window.adsbygoogle': typeof window.adsbygoogle + (Array.isArray(window.adsbygoogle) ? ' (array)' : ''),
                'LocalStorage Available': (() => {
                    try {
                        localStorage.setItem('test', 'test');
                        localStorage.removeItem('test');
                        return true;
                    } catch (e) {
                        return false;
                    }
                })()
            }, 'info');
            
            // æ˜¾ç¤ºå®¹å™¨ä¿¡æ¯
            const containers = [
                { id: 'banner-ad-320x50', name: '320x50æ¨ªå¹…å¹¿å‘Šå®¹å™¨' },
                { id: 'ad-300x250', name: '300x250å¹¿å‘Šå®¹å™¨' },
                { id: 'ad-728x90', name: '728x90å¹¿å‘Šå®¹å™¨' }
            ];
            
            containers.forEach(function(container) {
                const element = document.getElementById(container.id);
                if (element) {
                    const parent = element.parentElement;
                    addLog(`ğŸ“¦ ${container.name}: å°ºå¯¸ ${element.offsetWidth}x${element.offsetHeight}px, çˆ¶å®¹å™¨å°ºå¯¸ ${parent ? parent.offsetWidth + 'x' + parent.offsetHeight : 'N/A'}px`);
                }
            });
            
            // ========== Bannerå¹¿å‘Šç‹¬ç«‹æµ‹è¯• ==========
            addLog('ğŸ” Bannerå¹¿å‘Šåˆ†æ: Bannerå¹¿å‘Šä½¿ç”¨Google AdSenseï¼Œä¸H5 SDKå®Œå…¨ç‹¬ç«‹', 'info');
            addLog('âš¡ ç«‹å³æµ‹è¯•Bannerå¹¿å‘Šï¼ˆæ— éœ€ç­‰å¾…SDKåˆå§‹åŒ–ï¼‰...', 'info');
            updateStatus('ç«‹å³æµ‹è¯•Bannerå¹¿å‘Š...', 'info');
            
            // è‡ªåŠ¨æ£€æµ‹å¹¿å‘Šæ‹¦æˆªå™¨
            checkAdBlocker();
            
            // ç«‹å³æµ‹è¯•320x50å¹¿å‘Šï¼ˆæŒ‰è¦æ±‚è¿™æ˜¯ä¸»è¦çš„å¹¿å‘Šä½ï¼‰
            setTimeout(function() {
                addLog('ğŸ¯ ç«‹å³æµ‹è¯•320x50æ¨ªå¹…å¹¿å‘Šï¼ˆæ— éœ€SDKåˆå§‹åŒ–ï¼‰...', 'info');
                testBannerAd('320x50');
            }, 1000); // 1ç§’åç«‹å³æµ‹è¯•ï¼Œç»™é¡µé¢æ¸²æŸ“ä¸€ç‚¹æ—¶é—´
            
            // ========== å¹¶è¡Œåˆå§‹åŒ–PokiSDK ==========
            addLog('ğŸ”„ å¹¶è¡Œåˆå§‹åŒ–PokiSDKï¼ˆç”¨äºå…¶ä»–å¹¿å‘ŠåŠŸèƒ½ï¼‰...', 'info');
            
            PokiSDK.init().then(function() {
                addLog('âœ… PokiSDKåˆå§‹åŒ–æˆåŠŸï¼ˆç”¨äºæ’å±å’Œå¥–åŠ±å¹¿å‘Šï¼‰', 'success');
                updateStatus('Bannerå¹¿å‘Šå·²æµ‹è¯•ï¼ŒPokiSDKåˆå§‹åŒ–æˆåŠŸ', 'success');
                
            }).catch(function(error) {
                addLog('âŒ PokiSDKåˆå§‹åŒ–å¤±è´¥: ' + error + 'ï¼ˆä¸å½±å“Bannerå¹¿å‘Šï¼‰', 'error');
                addLog('â„¹ï¸ Bannerå¹¿å‘ŠåŠŸèƒ½ç‹¬ç«‹äºSDKï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨', 'info');
                updateStatus('Bannerå¹¿å‘Šå·²æµ‹è¯•ï¼ŒSDKåˆå§‹åŒ–å¤±è´¥ä½†ä¸å½±å“Banner', 'warning');
            });
        });
        
        // çª—å£å°ºå¯¸å˜åŒ–æ—¶é‡æ–°æ£€æŸ¥
        window.addEventListener('resize', function() {
            addLog('ğŸ“ çª—å£å°ºå¯¸å˜åŒ–: ' + window.innerWidth + 'x' + window.innerHeight, 'info');
        });
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†
        window.addEventListener('beforeunload', function() {
            addLog('ğŸ‘‹ é¡µé¢å³å°†å¸è½½ï¼Œæ¸…ç†èµ„æº...', 'info');
            destroyAllAds();
        });
    </script>
</body>
</html> 